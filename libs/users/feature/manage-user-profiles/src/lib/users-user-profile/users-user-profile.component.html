<ng-container *ngrxLet="routeItemContext$ as context">
  <h3>User Profile {{context}}</h3>

  <ng-container [ngSwitch]="context">
    <ng-container *ngSwitchCase="RouteItemContext.New">
      <app-api-status
        [requestState]="writeRequestState$ | async"
        [displayType]="'inline'">
        <ng-template #success>
          <users-user-profile-form
            [context]="context"
            (formSubmit)="onCreate($event)"
            (formCancel)="onCancel()">
          </users-user-profile-form>
        </ng-template>
      </app-api-status>
    </ng-container>
    <ng-container *ngSwitchCase="RouteItemContext.Edit">
      <app-api-status [requestState]="writeRequestState$ | async"></app-api-status>
      <app-api-status [requestState]="readRequestState$ | async">
        <ng-template #success>
          <users-user-profile-form
            [userProfile]="userProfile$ | async"
            [context]="context"
            (formSubmit)="onEdit($event)"
            (formCancel)="onCancel()">
          </users-user-profile-form>
        </ng-template>
      </app-api-status>
    </ng-container>
    <ng-container *ngSwitchCase="RouteItemContext.View">
      <app-api-status [requestState]="readRequestState$ | async">
        <ng-template #success>
          <users-user-profile-form
            [userProfile]="userProfile$ | async"
            [context]="context"></users-user-profile-form>
        </ng-template>
      </app-api-status>
    </ng-container>
  </ng-container>
</ng-container>
